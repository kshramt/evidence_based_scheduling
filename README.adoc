= Evidence Based Scheduling

image:https://github.com/kshramt/evidence_based_scheduling/actions/workflows/ci.yml/badge.svg["ci", link="https://github.com/kshramt/evidence_based_scheduling/actions/workflows/ci.yml"]

This is a TODO application, which offers the following features:

1. https://www.joelonsoftware.com/2007/10/26/evidence-based-scheduling/[The evidence based scheduling method]
2. https://jameshfisher.com/2013/12/19/todo-dag/[DAG-based dependency management]
3. https://web.dev/learn/pwa/[Offline-first PWA]

== Usage

[source,bash]
----
docker run \
  --rm \
  --init \
  --mount type=bind,source="$PWD"/data,target=/data \
  -e USE_LITESTREAM=no \
  -p 8080:8080 \
  ghcr.io/kshramt/evidence_based_scheduling:latest

# or

docker run \
  --rm \
  --init \
  --mount type=bind,source="$PWD"/data,target=/data \
  -e REPLICA_URI=gcs://<bucket>/data.sqlite \
  -p 8080:8080 \
  ghcr.io/kshramt/evidence_based_scheduling:latest

# or

# --log-driver local \
docker run \
  -d \
  --name ebs \
  --init \
  --log-driver journald \
  --mount type=bind,source="$PWD"/data,target=/data \
  -e REPLICA_URI=gcs://<bucket>/data.sqlite \
  -p8080:8080 \
  --restart always \
  ghcr.io/kshramt/evidence_based_scheduling:latest
# journalctl  CONTAINER_NAME=ebs

# docker pull ghcr.io/kshramt/evidence_based_scheduling:latest && docker container stop ebs && docker container rm ebs
----

== Development

[source,bash]
----
docker compose -f compose.yaml -f compose.dev.yaml up --build
----

[source,bash]
----
cd client
PORT=3000 DANGEROUSLY_DISABLE_HOST_CHECK=true npm run start
xdg-open http://localhost:3000
----

[source,bash]
----
docker build -t t:2 --target tests_e2e .
docker run --mount "type=bind,source=${PWD},target=${PWD}" --mount "type=bind,source=/var/run/docker.sock,target=/var/run/docker.sock" --mount type=bind,source="${HOME}/.docker/buildx,target=/root/.docker/buildx" -e MY_HOST=host.docker.internal -e "MY_COMPOSE_DIR=${PWD}" --add-host=host.docker.internal:host-gateway --init --rm t:2 .venv/bin/python3 -m pytest -s src
----
